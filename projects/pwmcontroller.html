<!DOCTYPE html>
<html>
	
	<head>
		<title>LED Strip PWM Controller : Michael Kafarowski</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="/scripts/style.css">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"> 
	
	</head>
	
	<body>
		<div id="mainWindow">
			<div id="mainContent">
				
				<!--- NAVIGATION BAR --->
				
				<div id="navBar">
					<div id="navBarInner">
						<div id="navBarBanner">
							<!--- <img src="./images/navBanner.jpg" alt="Banner"/> -->
							<span id="bigName">Michael Kafarowski</span>
							<span id="nameSubscript"><script src="/scripts/title.js"></script></span>
						</div>
						<div id="navBarLinks">
							<ul>
								<li><a href="/">Home</a></li>
								<li><a href="/projects/">Projects</a></li>
								<li><a href="/about/">About</a></li>
<li><a href="/blog/">Blog</a></li>
								<!-- 
								<li><a href="/photography/">Photography</a></li>
								<li><a href="/pm3000/index.html">Play PM3000</a></li> 
								-->

							</ul>
						</div>
					</div>
				</div>
				
				
				<!--- MAIN PAGE CONTENT, ONLY NEED TO MODIFY UNTIL BEGINNING OF FOOTER --->
				
				<div class="contentSection">
					<div class="contentSectionInner">
						<h1>LED Strip PWM Controller</h1>
						<div class="article">
							<a href="/projects/">Return to Projects</a>
							<br><br>
							<h2>Project Inception</h2>
							<p>My father recently bought a 12V white Philips LED Strip<!-- to use inside our new boat-->. Unfortunately, it was too bright out of the box, so I designed a PWM (Pulse Width Modulation) controller to allow him to dim it to the desired brightness efficiently. This was the first project I had designed a PCB for, which I learned a lot about.</p>

							<h2>Requirements</h2>
							<p>The criteria for this project was to dim the 12V, 1.5A LED strip in a way that could be installed into a 12 volt power supply. The PWM circuit was chosen for it’s simplicity, efficiency and practicality. An inline resistor would not be suitable as it would drop voltage across it and would dissipate too much heat. A buck converter would not dissipate as much heat, but would still drop voltage below the turn-on point of the LEDs.</p>

							<h2>PWM and Circuit Background</h2>
							<p>PWM works by rapidly switching on and off a voltage source in a square wave pattern. With smaller duty cycles, the average voltage over a period is decreased and the light dims, while the peak voltage level is maintained. This is important for devices such as LEDs which require a certain voltage to turn on. </p>
							
							<div class="imgwcaption" >
							<img src="projectimages/pwm/pwmschematic.png" style="width:100%"></img>
							<p>The completed circuit schematic in EAGLE CAD.</p>
							</div>
							
							<p>The dimmer was to consist of a square wave oscillator and a switch to drive the LED strip. The oscillator was built with a 555 timer configured as an astable multivibrator with different RC time constants connected to the discharge, threshold and trigger pin. A capacitor, two diodes and a variable resistor was used to form the duty cycle configuration circuit. Turning the potentiometer knob adjusted the balance of the resistance and thereby changes the duty cycle of the square wave.</p>

							<p>In order to drive the high current of the LED strip a IRF630 MOSFET was used by attaching the output of the 555 to the gate and wiring the LED strip in series between the 12V supply and the drain of the MOSFET.</p>

							<div class="imgwcaption">
							<img src="projectimages/pwm/magicdigikey.jpg"></img>
							<p>Next-day delivery for only $8 flat makes every Digikey.ca box that comes to my door a magical box.</p>
							</div>

							<h2>PCB Design</h2>
							<p>As this controller was to be used beyond just an experimental phase, a more permanent component mounting solution was required. I decided to try my hand at designing a PCB because I wanted the final product to look and perform professionally, and because I didn’t want to use perfboard. With the assistance of Sparkfun <add link> Eagle Tutorials I assembled my PCB. Some considerations that went into the design included ensuring that high current carrying components centered around the MOSFET were as close as possible to each other and that traces between them were sufficiently large enough to not pose a safety hazard. I also spend time considerable time tidying up the auto-router traces and removing unnecessary vias. It took multiple revisions until I was happy with the board, but then I shipped it off to OSH Park for fabrication. </p>

							<div class="imgwcaption">
							<img src="projectimages/pwm/pwm.jpg"></img>
							<p>Purple PCBs = Best PCBs</p>
							</div>
							
							<p>A week later I got my three boards back and I was super happy with how good they looked. I really like OSH Park’s quality of work and I think the purple solder mask looks really nice. It was my fault for not catching this before accepting the order, but for some reason the layer with my component values didn’t make it on to either side of the board. In addition, I misjudged the size of a resistor and a capacitor footprint, and ended up having to get creative with the leads to get them to fit. However apart from those issues, the board worked like a charm. </p>

							<h2>Testing and Final Notes</h2>
							<p>I performed 3 days of 8 hour endurance tests on the board at full brightness. The MOSFET barely got warmer than the individual LEDs on the strip, even without any heatsinking apart from the copper pour on the PCB.</p>

							<p>I also formed a better understanding of the 555 timer - this circuit is much more elegant than the 555 circuit I used in my No uC EEPROM Reader that needed a 5M ohm resistor!</p>
							
							<p>There is still much more that can be improved with this project - with SMD components it could potentially be made much smaller. It could also do with a (perhaps 3D printed) housing as well.</p>

							
							<!-- <div class="floatLeft contentPhoto">
								<img src="./images/blinken.jpeg" alt="Photo1"/>
							</div> --->
							<p> </p>
						</div>
					</div>
				</div>
	
				<!--- MAIN PAGE CONTENT ENDS --->
	
	
	
				<div id="footer">
					<p>&copy Michael Kafarowski 2018 <br><img style="width:15px;" alt="pickaxe" src="/images/pick.png"/> Site built completely from scratch and with love by Michael Kafarowski!</p>
				</div>
			</div>
		</div>
	</body>
</html>